// Generated by CoffeeScript 1.4.0

/*
  jquery.turbolinks.js ~ v1.0.0-rc2 ~ https://github.com/kossnocorp/jquery.turbolinks

  jQuery plugin for drop-in fix binded events problem caused by Turbolinks

  The MIT License

  Copyright (c) 2012 Sasha Koss
*/


(function() {
  var $, callbacks, fetch, named_callbacks, ready, turbolinksReady;

  $ = window.jQuery || (typeof require === "function" ? require('jquery') : void 0);

  named_callbacks = {};

  callbacks = [];

  ready = function() {
    var callback, key, _i, _j, _len, _len1, _ref, _results;
    for (_i = 0, _len = callbacks.length; _i < _len; _i++) {
      callback = callbacks[_i];
      callback($);
    }
    _ref = Object.keys(named_callbacks);
    _results = [];
    for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
      key = _ref[_j];
      _results.push(named_callbacks[key]($));
    }
    return _results;
  };

  turbolinksReady = function() {
    $.isReady = true;
    return ready();
  };

  fetch = function() {
    return $.isReady = false;
  };

  $(ready);

  $.fn.ready = function(callback) {
    if ((typeof name !== "undefined" && name !== null) && name !== "") {
      named_callbacks[callback.name] = callback;
    } else {
      callbacks.push(callback);
    }
    if ($.isReady) {
      return callback($);
    }
  };

  $.setReadyEvent = function(event) {
    return $(document).off('.turbolinks-ready').on(event + '.turbolinks-ready', turbolinksReady);
  };

  $.setFetchEvent = function(event) {
    return $(document).off('.turbolinks-fetch').on(event + '.turbolinks-fetch', fetch);
  };

  $.setReadyEvent('page:load');

  $.setFetchEvent('page:fetch');

}).call(this);
